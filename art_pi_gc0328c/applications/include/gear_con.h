/*
 * Copyright (c) 2006-2021, RT-Thread Development Team
 *
 * SPDX-License-Identifier: Apache-2.0
 *
 * Change Logs:
 * Date           Author       Notes
 * 2022-05-06     jzs       the first version
 */
#ifndef APPLICATIONS_INCLUDE_GEAR_CON_H_
#define APPLICATIONS_INCLUDE_GEAR_CON_H_


#define ControlNum  9
#define GearNum 8
struct rt_device_pwm *pwm_dev;
struct rt_device_pwm *pwm_device[9];
typedef struct{
    char *name;
    int channel;
}PWM_NAME;
typedef struct
{
    rt_int16_t x;
    rt_int16_t y;
    double angle;
    int force;
    rt_int16_t des;
    rt_int16_t length;
    int dir;
}Point;
static int GRAV_CON[2]= {1,1};
PWM_NAME PWM_DEVICE[9] = {{"pwm0",1},{"pwm1",2},{"pwm1",3},{"pwm2",1},
        {"pwm3",3},{"pwm3",4},{"pwm4",2},{"pwm4",3},{"pwm4",4}};

int GearProg00 [1][ControlNum] = {
//                {   110,  80, 80,  70,  70, 95,  80, 90,  100  }, // standby
//        {    180,  80, 80,  0,  0, 100, 80,  180,  100  }, // standby
        {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
//        {   115,  100, 60,  65,  65, 75,  100, 115,  100  }, // standby
      };
int GearProg01 [21][ControlNum] = {
        {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
        {   0,   0,   0,   0,   0,   0, -45,  20,  100  }, // leg4 up; leg4 fw
        {   0,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg4 dn
        {    0,  0,   0,   0,  -20, -45,  0,   0,  100  }, // leg3 up leg3 fw
        {    0, -45,  0,  -20,  0,   0,  45,   0,  100  },  // leg2 up leg 1 4bw
        {  0 ,   0,   0,   20,   20,   0,   0, 0,  100  }, // leg2,3 dn
        {   20,   0,   -45,  0,  0, 45,  0,   20,  100  }, // leg1,4 up; leg2 3 bw
        {  -20 ,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg1,4 dn
        {    0,   0,   45,   -20,   0,  0,  0,   0,  100  }, // leg2 up leg 2fw
        {  -20,   45,   0,   20,  0,  0, 0,   0,  100  }, // leg1 up leg 1 fw
        {  20,   0,   0,   0,  0,  0, 0,   0,  100  }, // leg1 up leg 1 fw

        {   0,   0,   45,   -20,   0,   0, 0,  0,  100  }, // leg2 up; leg2 fw
        {   0,   0,   0,   20,   0,   0,   0, 0,  100  }, // leg2 dn
        {    20,  45,   0,   0,  0, 0,  0,   0,  100  }, // leg1 up leg1 fw
        {    0, 0,  -45,  0,  0,   45,  0,   20,  100  },  // leg4 up leg 2 3bw
        {  -20 ,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg1,4 dn
        {   0,   -45,   0,  -20,  -20, 0,  45,   20,  100  }, // leg2,3 up; leg1 4 bw
        {  0 ,   0,   0,   20,   20,   0,   0, 0,  100  }, // leg2,3 dn
        {    0,   0,   0,   0,   -20,  -45,  0,   0,  100  }, // leg3 up leg 3fw
        {  0,    0,    0,   0,   20,     0, -45,   20,  100  }, // leg4 up leg 4 fw
        {  0,   0,   0,   0,  0,  0, 0,   -20,  100  }, // leg4dw



};
// Forward

int GearProg02 [11][ControlNum] = {
//           1,    2,   3,   4,  5   6     7    8
        {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
        {   20,   0,   0,   0,   0,   0, -45,  20,  100  }, // leg1,4 up; leg4 fw
        {  -20,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg1,4 dn
        {    0,   0,   0, -20, -20,   0,   0,   0,  100  }, // leg2,3 up
        {    0, -45,  45,   0,   0,   0,  45,   0,  100  }, // leg1,4 bk; leg2 fw
        {    0,   0,   0,  20,  20,   0,   0,   0,  100  }, // leg2,3 dn
        {   20,  45,   0,   0,   0,   0,   0,  20,  100  }, // leg1,4 up; leg1 fw
        {    0,   0, -45,   0,   0,  45,   0,   0,  100  }, // leg2,3 bk
        {  -20,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg1,4 dn
        {    0,   0,   0,   0, -20,   0,   0,   0,  100  }, // leg3 up
        {    0,   0,   0,   0,  20, -45,   0,   0,  100  }, // leg3 fw dn

};
// Backward
int GearProg03step = 11;
int GearProg03 [11][ControlNum] = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
  {   20,  45,   0,   0,   0,   0,   0,  20,  100  }, // leg4,1 up; leg1 fw
  {  -20,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg4,1 dn
  {    0,   0,   0, -20, -20,   0,   0,   0,  100  }, // leg3,2 up
  {    0,  -45,   0,   0,   0,  -45, 45,   0,  100  }, // leg4,1 bk; leg3 fw
  {    0,   0,   0,  20,  20,   0,   0,   0,  100  }, // leg3,2 dn
  {   20,   0,   0,   0,   0,   0,  -45,  20,  100  }, // leg4,1 up; leg4 fw
  {    0,   0,  -45,   0,   0, 45,   0,   0,  100  }, // leg3,1 bk
  {  -20,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg4,1 dn
  {    0,   0,   0, -20,   0,   0,   0,   0,  100  }, // leg2 up
  {    0,   0, 45,  20,   0,   0,   0,   0,  100  }, // leg2 fw dn
};
// Move Left
int GearProg04step = 11;
int GearProg04 [11][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
        {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
//        {   110,  80, 80,  70,  70, 95,  80, 90,  100  }, // standby
        {    0,   0, -22, -10, -10,   0,   0,   0,  100  }, // leg3,2 up; leg2 fw
        {    0,   0,   0,  10,  10,   0,   0,   0,  100  }, // leg3,2 dn
        {   10,   0,   0,   0,   0,   0,   0,  10,  100  }, // leg1,4 up
        {    0,  22,  22,   0,   0, -22,   0,   0,  100  }, // leg3,2 bk; leg1 fw
        {  -10,   0,   0,   0,   0,   0,   0, -10,  100  }, // leg1,4 dn
        {    0,   0,   0, -10, -10,  22,   0,   0,  100  }, // leg3,2 up; leg3 fw
        {    0, -22,   0,   0,   0,   0,  22,   0,  100  }, // leg1,4 bk
        {    0,   0,   0,  10,  10,   0,   0,   0,  100  }, // leg3,2 dn
        {    0,   0,   0,   0,   0,   0,   0,  10,  100  }, // leg4 up
        {    0,   0,   0,   0,   0,   0, -22, -10,  100  }, // leg4 fw dn
};

// Move Right
int GearProg05step = 11;
int GearProg05 [11][ControlNum] = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
//  {   110,  80, 80,  70,  70, 95,  80, 90,  100  }, // standby
  {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
  {    0,   0,   0, -10, -10, -22,   0,   0,  100  }, // leg2,3 up; leg3 fw
  {    0,   0,   0,  10,  10,   0,   0,   0,  100  }, // leg2,3 dn
  {   10,   0,   0,   0,   0,   0,   0,  10,  100  }, // leg4,1 up
  {    0,   0, -22,   0,   0,  22,  22,   0,  100  }, // leg2,3 bk; leg4 fw
  {  -10,   0,   0,   0,   0,   0,   0, -10,  100  }, // leg4,1 dn
  {    0,   0,  22, -10, -10,   0,   0,   0,  100  }, // leg2,3 up; leg2 fw
  {    0,  22,   0,   0,   0,   0, -22,   0,  100  }, // leg4,1 bk
  {    0,   0,   0,  10,  10,   0,   0,   0,  100  }, // leg2,3 dn
  {   10,   0,   0,   0,   0,   0,   0,   0,  100  }, // leg1 up
  {  -10, -22,   0,   0,   0,   0,   0,   0,  100  }, // leg1 fw dn
};

// Turn left
int GearProg06step = 8;
int GearProg06 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
  {   10,   0,   0,   0,   0,   0,   0,  20,  100  }, // leg1,4 up
  {    0,  45,   0,   0,   0,   0,  45,   0,  100  }, // leg1,4 turn
  {  -20,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg1,4 dn
  {    0,   0,   0, -20, -20,   0,   0,   0,  100  }, // leg2,3 up
  {    0,   0,  45,   0,   0,  45,   0,   0,  100  }, // leg2,3 turn
  {    0,   0,   0,  20,  20,   0,   0,   0,  100  }, // leg2,3 dn
  {    0, -45, -45,   0,   0, -45, -45,   0,  100  }, // leg1,2,3,4 turn
};

// Turn right
int GearProg07step = 8;
int GearProg07 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
  {    0,   0,   0, -20, -20,   0,   0,   0,  100  }, // leg2,3 up
  {    0,   0, -45,   0,   0, -45,   0,   0,  100  }, // leg2,3 turn
  {    0,   0,   0,  20,  20,   0,   0,   0,  100  }, // leg2,3 dn
  {   20,   0,   0,   0,   0,   0,   0,  20,  100  }, // leg1,4 up
  {    0, -45,   0,   0,   0,   0, -45,   0,  100  }, // leg1,4 turn
  {  -20,   0,   0,   0,   0,   0,   0, -20,  100  }, // leg1,4 dn
  {    0,  45,  45,   0,   0,  45,  45,   0,  100  }, // leg1,2,3,4 turn
};
// Lie
int GearProg08step = 1;
int GearProg08 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {  170,  80,  80,  10,  10,  100,  80, 170,  500  }, // leg1,4 up
};

// Say Hi
int GearProg09step = 4;
int GearProg09 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   180,  115, 45,  50,  0, 50,  115, 130,  100  }, // standby
//  {  120,  90,  90, 110,  60,  90,  90,  70,  200  }, // leg1, 3 down
  {  -50,   0,   0,   0,  50,   0,   0,   0,  200  }, // standby
  {   50,   0,   0,   0, -50,   0,   0,   0,  200  }, // leg1, 3 down
  {  -50,   0,   0,   0,  50,   0,   0,   0,  200  }, // standby
};

// Fighting
int GearProg10step = 11;
int GearProg10 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   130,  100, 60,  50,  65, 75,  100, 115,  200  }, // standby
//  {  120,  90,  90, 110,  60,  90,  90,  70,  200  }, // leg1, 2 down
  {    0, -20, -20,   0,   0, -20, -20,   0,  200  }, // body turn left
  {    0,  40,  40,   0,   0,  40,  40,   0,  200  }, // body turn right
  {    0, -40, -40,   0,   0, -40, -40,   0,  200  }, // body turn left
  {    0,  40,  40,   0,   0,  40,  40,   0,  200  }, // body turn right
  {  -50, -20, -20, -40,  50, -20, -20,  40,  200  }, // leg1, 2 up ; leg3, 4 down
  {    0, -20, -20,   0,   0, -20, -20,   0,  200  }, // body turn left
  {    0,  40,  40,   0,   0,  40,  40,   0,  200  }, // body turn right
  {    0, -40, -40,   0,   0, -40, -40,   0,  200  }, // body turn left
  {    0,  40,  40,   0,   0,  40,  40,   0,  200  }, // body turn right
  {    0, -20, -20,   0,   0, -20, -20,   0,  200  }, // leg1, 2 up ; leg3, 4 down
};

// Push up
int GearProg11step = 11;
int GearProg11 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   130,  115, 45,  50,  50, 50,  115, 130,  100  }, // standby
  {   30,   0,   0, -30, -30,   0,   0,  30,  400  }, // down
  {  -30,   0,   0,  30,  30,   0,   0, -30,  500  }, // up
  {   30,   0,   0, -30, -30,   0,   0,  30,  600  }, // down
  {  -30,   0,   0,  30,  30,   0,   0, -30,  700  }, // up
  {   30,   0,   0, -30, -30,   0,   0,  30,  1300 }, // down
  {  -30,   0,   0,  30,  30,   0,   0, -30,  1800 }, // up
  {   65,   0,   0, -65, -65,   0,   0,  65,  200  }, // fast down
  {  -65,   0,   0,   0,  15,   0,   0,   0,  500  }, // leg1 up
  {    0,   0,   0,   0,  50,   0,   0,   0,  500  }, // leg2 up
  {    0,   0,   0,  65,   0,   0,   0, -65,  500  }, // leg3, leg4 up
};

// Sleep
int GearProg12step = 2;
int GearProg12 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   35,  90,  90, 145, 145,  90,  90,  35,  400  }, // leg1,4 dn
  {    0, -45,  45,   0,   0,  45, -45,   0,  400  }, // protect myself
};

// Dancing 1
int GearProg13step = 10;
int GearProg13 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {    90,  80, 80,  90,  90, 100, 80,  90,  300   }, // standby
  {  -40,   0,   0,   0,   0,   0,   0,   0,  300  }, // leg1 dn
  {   40,   0,   0,  40,   0,   0,   0,   0,  300  }, // leg1 up; leg2 dn
  {    0,   0,   0, -40,   0,   0,   0, -40,  300  }, // leg2 up; leg4 dn
  {    0,   0,   0,   0,  40,   0,   0,  40,  300  }, // leg4 up; leg3 dn
  {  -40,   0,   0,   0, -40,   0,   0,   0,  300  }, // leg3 up; leg1 dn
  {   40,   0,   0,  40,   0,   0,   0,   0,  300  }, // leg1 up; leg2 dn
  {    0,   0,   0, -40,   0,   0,   0, -40,  300  }, // leg2 up; leg4 dn
  {    0,   0,   0,   0,  40,   0,   0,  40,  300  }, // leg4 up; leg3 dn
  {    0,   0,   0,   0, -40,   0,   0,   0,  300  }, // leg3 up
};

// Dancing 2
int GearProg14step = 9;
int GearProg14 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   115,  80, 80,  65,  65, 100,  80, 115,  100  }, // standby
//  {   70,  45, 135, 110, 110, 135,  45,  70,  300  }, // leg1,2,3,4 two sides
  {   45,   0,   0, -45,   0,   0,   0,   0,  300  }, // leg1,2 up
  {  -45,   0,   0,  45, -45,   0,   0,  45,  300  }, // leg1,2 dn; leg3,4 up
  {   45,   0,   0, -45,  45,   0,   0, -45,  300  }, // leg3,4 dn; leg1,2 up
  {  -45,   0,   0,  45, -45,   0,   0,  45,  300  }, // leg1,2 dn; leg3,4 up
  {   45,   0,   0, -45,  45,   0,   0, -45,  300  }, // leg3,4 dn; leg1,2 up
  {  -45,   0,   0,  45, -45,   0,   0,  45,  300  }, // leg1,2 dn; leg3,4 up
  {   45,   0,   0, -45,  45,   0,   0, -45,  300  }, // leg3,4 dn; leg1,2 up
  {  -40,   0,   0,  40,   0,   0,   0,   0,  300  }, // leg1,2 dn
};

// Dancing 3
int GearProg15step = 10;
int GearProg15 [][ControlNum]  = {
  // P10, P11, P12, P16, P02, P04, P07, P15,  ms
  {   70,  45,  45, 110, 110, 135, 135,  70,  300  }, // leg1,2,3,4 bk
  {   40,   0,   0, -50, -40,   0,   0,   0,  300  }, // leg1,2,3 up
  {  -40,   0,   0,  50,  40,   0,   0,   0,  300  }, // leg1,2,3 dn
  {   40,   0,   0,   0, -40,   0,   0,  50,  300  }, // leg1,3,4 up
  {  -40,   0,   0,   0,  40,   0,   0, -50,  300  }, // leg1,3,4 dn
  {   40,   0,   0, -50, -40,   0,   0,   0,  300  }, // leg1,2,3 up
  {  -40,   0,   0,  50,  40,   0,   0,   0,  300  }, // leg1,2,3 dn
  {   40,   0,   0,   0, -40,   0,   0,  50,  300  }, // leg1,3,4 up
  {  -40,   0,   0,   0,  40,   0,   0, -50,  300  }, // leg1,3,4 dn
  {    0,  45,  45,   0,   0, -45, -45,   0,  300  }, // standby
};
int cmdcon( int GearProg[][ControlNum],int step);
void thread_sample(void);


#endif /* APPLICATIONS_INCLUDE_GEAR_CON_H_ */
